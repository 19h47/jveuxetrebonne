{#

partials/slider-recipe

@author  Jérémy Levron <jeremylevron@19h47.fr

#}

{% for collection in post.get_field( 'collection' ) %}

	<div class="Slider-recipe js-slider-recipe hidden-xs hidden-sm">
		<ul class="items js-slider-recipe-container">

			{% spaceless %}

			<li class="item">

				<div class="item__inner">
					{% if collection.image|length %}
						<img class="" src="{{ TimberImage( collection.image ).src }}">
					{% endif %}
				</div>

				<div class="item__inner">

					<h3 class="Slider-recipe__title">
						{{- collection.description | default( pll__( 'Pour commencer <br> tu as besoin de :' ) ) -}}
					</h3>

					{% if post.person_number or post.preparation_time or post.cooking_time %}
						<ul class="d-flex margin-y-5 align-items-center padding-0 justify-content-center" style="list-style-type: none;">
							{{ post.person_number ? "<li class=\"person-number\">#{ post.person_number } pers.</li>" }}
							{{ post.preparation_time ? "<li class=\"preparation-time\">#{ post.preparation_time } min</li>" }}
							{{ post.cooking_time ? "<li class=\"cooking-time\">#{ post.cooking_time } min</li>" }}
						</ul>
					{% endif %}

					{% if collection.ingredients %}
						<ul class="Slider-recipe__ingredients">
							{{- collection.ingredients | map(item => "<li>#{ item.ingredient }</li>") | join -}}
						</ul>
					{% endif %}
				</div>

			</li>

			{% for step in collection.steps %}
				<li class="item">

					<div class="item__inner">
						{% if step.image|length %}
							<img src="{{ TimberImage( step.image ).src }}">
						{% endif %}
					</div>
					<div class="item__inner">
						<p class="Slider-recipe__title title-step">
							{{- pll__( 'Étape' ) -}}&nbsp;{{ loop.index }}
						</p>
						{{- step.description -}}
					</div>

				</li>
			{% endfor %}


			{% endspaceless %}
		</ul>

	    {% if collection.steps | length > 0 %}

		    <div class="Slider-recipe__progressbar js-slider-recipe-progressbar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>

		    {% include 'partials/slider-navigation.html.twig' with { count: collection.steps | length + 1 } %}

		{% endif %}
	</div>


	<div class="Slider-recipe js-slider-recipe hidden-md hidden-lg hidden-hd">
		<ul class="items js-slider-recipe-container hidden-md hidden-lg hidden-hd">

			{% spaceless %}

			<li class="item">

				<div class="item__inner image-mobile">
					{% if collection.image | length %}
						<img class="" src="{{ TimberImage( collection.image ).src }}">
					{% endif %}
				</div>

			</li>
			<li class="item">

				<div class="item__inner ingredients-mobile">

					<h3 class="Slider-recipe__title">
						{{- collection.description | default( pll__( 'Pour commencer <br> tu as besoin de :' ) ) -}}
					</h3>

					{% if post.person_number or post.preparation_time or post.cooking_time %}
						<ul class="d-flex align-items-center margin-y-5">
							{{- post.person_number ? "<li class=\"person-number\">#{ post.person_number } pers.</li>" : '' -}}
							{{- post.preparation_time ? "<li class=\"preparation-time\">#{ post.preparation_time } min</li>" : '' -}}
							{{- post.cooking_time ? "<li class=\"cooking-time\">#{ post.cooking_time } min</li>" : '' -}}
						</ul>
					{% endif %}


					{# Ingredients #}
					{% if collection.ingredients %}
						<ul class="Slider-recipe__ingredients">
							{{- collection.ingredients | map(item => "<li>#{ item.ingredient }</li>" ) | join -}}
						</ul>
					{% endif %}

				</div>

			</li>

			{% for step in collection.steps %}
				<li class="item">
					<div class="item__inner image-mobile">
						{% if step.image | length %}
							<img src="{{ TimberImage( step.image ).src }}">
						{% endif %}
					</div>
				</li>
				<li class="item">
					<div class="item__inner ingredients-mobile">

						<p class="Slider-recipe__title title-step">
							{{- pll__( 'Étape' ) -}}&nbsp;{{ loop.index }}
						</p>
						{{- step.description -}}
					</div>

				</li>
			{% endfor %}


			{% endspaceless %}
		</ul>

	    {% if collection.steps|length > 0 %}

		    <div class="Slider-recipe__progressbar js-slider-recipe-progressbar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
			{% include 'partials/slider-navigation.html.twig' with { count: collection.steps|length + 1 } %}

		{% endif %}
	</div>

{% endfor %}
